<!DOCTYPE html>
<html lang="uk" style="background:#0F0F0F;color-scheme:dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Habit Hero</title>

    <!-- Telegram SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Confetti CDN -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <!-- Design System (tokens ‚Üí base ‚Üí module CSS) -->
    <link rel="stylesheet" href="./css/tokens.css">
    <link rel="stylesheet" href="./css/base.css">

    <!-- Module CSS (–ø–æ—Ä—è–¥–æ–∫ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è!) -->
    <link rel="stylesheet" href="./modules/css/tokens.css">
    <link rel="stylesheet" href="./modules/css/components.css">
    <link rel="stylesheet" href="./modules/css/bento-grid.css">
    <link rel="stylesheet" href="./modules/css/cards.css">
    <link rel="stylesheet" href="./modules/css/animations.css">
    <link rel="stylesheet" href="./modules/css/features.css">
    <link rel="stylesheet" href="./modules/css/modals.css">

    <!-- Font Awesome (—ñ–∫–æ–Ω–∫–∏) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body style="background:#0F0F0F;color:#fff">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Overlay: "–≤—ñ–¥–∫—Ä–∏–π –≤ Telegram" ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="telegram-only" hidden>
        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;padding:20px;color:#fff;">
            <h2>Habit Hero</h2>
            <p style="color:#9ca3af;margin-top:8px;">Open this app inside Telegram</p>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê App Shell ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="app-shell">

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Panel: DASHBOARD ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="panel is-active" data-tab="dashboard">

            <!-- Skeleton (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è) -->
            <div id="dashboard-skeleton">
                <div class="skeleton-card" style="height:140px;border-radius:16px;background:#1f2937;margin-bottom:12px;"></div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                    <div class="skeleton-card" style="height:120px;border-radius:16px;background:#1f2937;"></div>
                    <div class="skeleton-card" style="height:120px;border-radius:16px;background:#1f2937;"></div>
                </div>
            </div>

            <!-- Content (–ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è) -->
            <div id="dashboard-content" hidden>
                <!-- Trial banner -->
                <div id="dashboard-trial" hidden></div>

                <!-- Stats strip -->
                <div class="stats-strip">
                    <div class="stats-strip__main">
                        <span class="stats-strip__value" id="stats-progress">0/0</span>
                        <span class="stats-strip__label">–≤–∏–∫–æ–Ω–∞–Ω–æ</span>
                    </div>
                    <span class="stats-strip__meta" id="stats-meta"></span>
                    <div class="stats-strip__bar">
                        <span id="stats-strip-bar" style="--progress:0%"></span>
                    </div>
                </div>

                <!-- Bento Grid ‚Äî –≤—Å—ñ –∫–∞—Ä—Ç–∫–∏ –≥–µ–Ω–µ—Ä—É—î renderer.js -->
                <div id="bento-grid" class="bento-grid"></div>

                <!-- Heatmap (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ dashboard) -->
                <div id="heatmap-wrapper" hidden>
                    <div id="heatmap-container"></div>
                </div>
            </div>

            <!-- Empty state -->
            <div id="dashboard-empty" hidden>
                <div class="empty-state">
                    <div class="empty-state__icon">üöÄ</div>
                    <h2>–ü–æ—á–Ω–∏ —Å–≤—ñ–π —à–ª—è—Ö!</h2>
                    <p>–î–æ–¥–∞–π –ø–µ—Ä—à—É –∑–≤–∏—á–∫—É —ñ –≤—ñ–¥—Å—Ç–µ–∂—É–π –ø—Ä–æ–≥—Ä–µ—Å –∫–æ–∂–µ–Ω –¥–µ–Ω—å</p>
                    <button id="dashboard-empty-cta" class="primary primary--solid">+ –î–æ–¥–∞—Ç–∏ –ø–µ—Ä—à—É –∑–≤–∏—á–∫—É</button>
                </div>
            </div>

            <!-- Error state -->
            <div id="dashboard-error" hidden>
                <div class="empty-state">
                    <div class="empty-state__icon">‚ö†Ô∏è</div>
                    <h2>–©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>
                    <p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ</p>
                    <button id="dashboard-retry" class="primary">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Panel: HABITS ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="panel" data-tab="habits">
            <div id="habits-skeleton">
                <div class="skeleton-card" style="height:60px;border-radius:12px;background:#1f2937;margin-bottom:8px;"></div>
                <div class="skeleton-card" style="height:60px;border-radius:12px;background:#1f2937;margin-bottom:8px;"></div>
            </div>
            <div id="habits-content" hidden>
                <div id="habits-list"></div>

                <!-- Add habit form -->
                <div class="habit-add">
                    <div class="habit-add__title">–ù–æ–≤–∞ –∑–≤–∏—á–∫–∞</div>
                    <div class="inline-form">
                        <input type="text" id="habit-add-input" class="input" placeholder="–ù–∞–∑–≤–∞ –∑–≤–∏—á–∫–∏" autocomplete="off">
                        <button id="habit-add-btn" class="primary primary--solid btn--icon" aria-label="–î–æ–¥–∞—Ç–∏">+</button>
                    </div>
                    <div class="type-selector">
                        <button class="type-btn is-active" data-type="boolean">‚úì –¢–∞–∫/–ù—ñ</button>
                        <button class="type-btn" data-type="counter">üî¢ –õ—ñ—á–∏–ª—å–Ω–∏–∫</button>
                        <button class="type-btn" data-type="timer">‚è± –¢–∞–π–º–µ—Ä</button>
                    </div>
                    <div id="counter-config" class="counter-config" hidden>
                        <input type="number" id="counter-target" class="input" placeholder="–¶—ñ–ª—å (–Ω–∞–ø—Ä. 8)" min="1">
                        <input type="number" id="counter-step" class="input" placeholder="–ö—Ä–æ–∫ (–∑–∞ –∑–∞–º–æ–≤—á. 1)" min="1">
                    </div>
                    <div id="timer-config" class="timer-config" hidden>
                        <input type="number" id="timer-duration" class="input" placeholder="–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Ö–≤–∏–ª–∏–Ω–∏)" min="1">
                    </div>
                    <div id="habit-quick-chips" class="chip-list">
                        <button class="chip-btn" data-title="–í–æ–¥–∞" data-type="counter" data-target="8" data-step="1">üíß –í–æ–¥–∞</button>
                        <button class="chip-btn" data-title="–ú–µ–¥–∏—Ç–∞—Ü—ñ—è" data-type="timer" data-duration="10">üßò –ú–µ–¥–∏—Ç–∞—Ü—ñ—è</button>
                        <button class="chip-btn" data-title="–ß–∏—Ç–∞–Ω–Ω—è">üìö –ß–∏—Ç–∞–Ω–Ω—è</button>
                        <button class="chip-btn" data-title="–°–ø–æ—Ä—Ç">üí™ –°–ø–æ—Ä—Ç</button>
                        <button class="chip-btn" data-title="–†–∞–Ω–Ω—ñ–π –ø—ñ–¥–π–æ–º">‚è∞ –†–∞–Ω–Ω—ñ–π –ø—ñ–¥–π–æ–º</button>
                    </div>
                </div>
            </div>
            <div id="habits-empty" hidden>
                <div class="empty-state">
                    <div class="empty-state__icon">üìù</div>
                    <p>–¢—É—Ç –±—É–¥—É—Ç—å —Ç–≤–æ—ó –∑–≤–∏—á–∫–∏. –î–æ–¥–∞–π –ø–µ—Ä—à—É –Ω–∏–∂—á–µ üëá</p>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Panel: STATS ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="panel" data-tab="stats">
            <div id="stats-skeleton">
                <div class="skeleton-card" style="height:200px;border-radius:16px;background:#1f2937;"></div>
            </div>
            <div id="stats-content" hidden>
                <div id="stats-charts">
                    <!-- Stats charts rendered by JS -->
                </div>
                <div id="stats-empty-state" class="empty-state">
                    <div class="empty-state__icon">üìä</div>
                    <h2>–©–µ –Ω–µ–º–∞—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</h2>
                    <p>–ü–æ—á–Ω–∏ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–≤–∏—á–∫–∏ ‚Äî —ñ —Ç—É—Ç –∑'—è–≤–∏—Ç—å—Å—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞</p>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Panel: SETTINGS ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="panel" data-tab="settings">
            <div id="settings-skeleton">
                <div class="skeleton-card" style="height:300px;border-radius:16px;background:#1f2937;"></div>
            </div>
            <div id="settings-content" hidden>
                <!-- Settings rendered by settings.js -->
            </div>
        </div>

    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Toast Container (—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="toast-container"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Context Sheet (–¥–æ–≤–≥–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç–∫—É) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="sheet-backdrop" hidden></div>
    <div id="context-sheet" hidden>
        <div id="context-sheet-title"></div>
        <!-- –ö–Ω–æ–ø–∫–∏ –¥—ñ–π –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è JS'–æ–º -->
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 5-minute Rule Modal ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="five-min-backdrop" hidden></div>
    <div id="five-min-modal" hidden>
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è JS'–æ–º -->
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Focus Mode Overlay ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="focus-overlay" hidden>
        <div id="focus-routine"></div>
        <div id="focus-title"></div>
        <div id="focus-sub"></div>
        <div id="focus-step"></div>
        <div id="focus-timer" hidden>
            <div id="focus-timer-value"></div>
        </div>
        <div id="focus-progress-bar" style="width:0%"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Error Log (–¥–µ–±–∞–≥ ‚Äî —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –∑–≤–µ—Ä—Ö—É) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="error-log" hidden></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Bottom Tab Bar ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <nav class="tabbar">
        <button class="tabbar__item is-active" data-tab="dashboard" aria-selected="true">
            <i class="fas fa-th-large"></i>
            <span>Dashboard</span>
        </button>
        <button class="tabbar__item" data-tab="habits" aria-selected="false">
            <i class="fas fa-check-circle"></i>
            <span>Habits</span>
        </button>
        <button class="tabbar__item" data-tab="stats" aria-selected="false">
            <i class="fas fa-chart-bar"></i>
            <span>Stats</span>
        </button>
        <button class="tabbar__item" data-tab="settings" aria-selected="false">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
        </button>
    </nav>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Entry Point ‚Äî ES Module ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script type="module" src="./modules/app.js"></script>
</body>
</html>
